const idProduct=new URL(window.location.href).searchParams.get("id");console.log(`Product ${idProduct} retrieved !`);let imgProduct=document.querySelector(".item__img"),img=document.createElement("img");imgProduct.appendChild(img);let titleProduct=document.getElementById("title"),priceProduct=document.getElementById("price"),descriptionProduct=document.getElementById("description"),colorsProduct=document.getElementById("colors");async function getProduct(){await fetch("http://localhost:3000/api/products/"+idProduct).then(response=>response.json()).then(product=>{img.setAttribute("src",product.imageUrl),img.setAttribute("alt",product.altTxt),titleProduct.innerHTML=product.name,priceProduct.innerHTML=product.price,descriptionProduct.innerHTML=product.description,document.title=product.name;for(let i=0;i<product.colors.length;i++){let color=document.createElement("option");color.setAttribute("value",product.colors[i]),color.innerHTML=product.colors[i],colorsProduct.appendChild(color)}}).catch(err=>console.log("Error : "+err))}getProduct();let addToCartBtn=document.getElementById("addToCart");function addToCart(){const chooseColor=document.querySelector("#colors"),chooseQtty=document.querySelector("#quantity");if(chooseQtty.value>0&&chooseQtty.value<=100&&0!=chooseQtty.value&&0!=chooseColor.value)if(localStorage.getItem("cart")){let productCart=JSON.parse(localStorage.getItem("cart"));console.log(productCart);let idKanap=idProduct,colorKanap=document.querySelector("#colors").value,qttyKanap=document.querySelector("#quantity").value;const resultFind=productCart.find(el=>el.idKanap===idProduct&&el.colorKanap===colorKanap);if(console.log("result find equal :"),console.log(resultFind),console.log("end result find"),resultFind){console.log("result find kanap = "+resultFind.qttyKanap),console.log("qttyKanap = "+qttyKanap);let newQuantity=parseInt(qttyKanap)+parseInt(resultFind.qttyKanap);console.log("newQtty equal : "+newQuantity),resultFind.qttyKanap=newQuantity,localStorage.setItem("cart",JSON.stringify(productCart)),console.log("productCart equal :"),console.log(productCart),console.log("end productCart")}else{let productCart=JSON.parse(localStorage.getItem("cart")),idKanap=idProduct,nameKanap=document.querySelector("#title").textContent,colorKanap=document.querySelector("#colors").value,qttyKanap=document.querySelector("#quantity").value,imgKanap=img.src,altImg=img.alt,priceKanap=document.querySelector("#price").textContent;console.log(img),console.log(idKanap,nameKanap,colorKanap,qttyKanap,imgKanap,altImg,priceKanap);let productCartObj={idKanap:idProduct,nameKanap:nameKanap,colorKanap:colorKanap,qttyKanap:qttyKanap,imgKanap:imgKanap,altImg:altImg,priceKanap:priceKanap};productCart.push(productCartObj);let objCart=JSON.stringify(productCart);localStorage.setItem("cart",objCart),alert("Ajouté au panier !")}}else{let productCart=[],idKanap=idProduct,nameKanap=document.querySelector("#title").textContent,colorKanap=document.querySelector("#colors").value,qttyKanap=document.querySelector("#quantity").value,imgKanap=img.src,altImg=img.alt,priceKanap=document.querySelector("#price").textContent;console.log(img),console.log(idKanap,nameKanap,colorKanap,qttyKanap,imgKanap,altImg,priceKanap);let productCartObj={idKanap:idProduct,nameKanap:nameKanap,colorKanap:colorKanap,qttyKanap:qttyKanap,imgKanap:imgKanap,altImg:altImg,priceKanap:priceKanap};productCart.push(productCartObj);let objCart=JSON.stringify(productCart);localStorage.setItem("cart",objCart),alert("Ajouté au panier !")}}addToCartBtn.addEventListener("click",addToCart);
//# sourceMappingURL=product.min.js.map